<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Padel Scoreboard Responsive</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* Layout Desktop/Tablet (default) */
        .container {
            width: 100%;
            max-width: 800px;
            height: auto;
            min-height: 600px;
            padding: 20px;
            border-radius: 20px;
            position: relative;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .score-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            width: 100%;
            max-width: 600px;
            text-align: center;
        }

        .player-section h2 {
            font-size: 24px;
            margin-bottom: 20px;
        }

        .score-display {
            margin-bottom: 20px;
        }

        .score-display .label {
            font-size: 14px;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .score-display .value {
            font-size: 48px;
            font-weight: bold;
        }

        .score-display .value.sets.p1 { color: #4ade80; }
        .score-display .value.sets.p2 { color: #06b6d4; }

        .score-display .value.games { font-size: 32px; }
        .score-display .value.points { font-size: 28px; }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .btn-plus, .btn-minus {
            border: none;
            color: white;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
        }

        .btn-plus {
            width: 60px;
            height: 60px;
            font-size: 32px;
        }

        .btn-plus.p1 { background: #4ade80; }
        .btn-plus.p2 { background: #06b6d4; }

        .btn-minus {
            width: 45px;
            height: 45px;
            font-size: 24px;
            background: rgba(255, 255, 255, 0.3);
        }

        .top-controls {
            position: absolute;
            top: 20px;
            right: 20px;
        }

        .reset-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 24px;
            cursor: pointer;
        }

        .winner-banner {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 215, 0, 0.9);
            color: black;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            z-index: 10;
        }

        .deuce-indicator {
            position: absolute;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: bold;
        }

        /* Media Query per Display Circolare (400x400 o meno) */
        @media (max-width: 450px), (max-height: 450px) {
            body {
                background: linear-gradient(135deg, #1e3c72, #2a5298);
                width: 400px;
                height: 400px;
                overflow: hidden;
                border-radius: 50%;
            }

            .container {
                width: 400px;
                height: 400px;
                border-radius: 50%;
                overflow: hidden;
                padding: 0;
                min-height: unset;
                max-width: unset;
            }

            .score-grid {
                gap: 20px;
                width: 350px;
                max-width: unset;
            }

            .player-section h2 {
                font-size: 18px;
                margin-bottom: 10px;
            }

            .score-display {
                margin-bottom: 15px;
            }

            .score-display .label {
                font-size: 12px;
            }

            .score-display .value {
                font-size: 36px;
            }

            .score-display .value.games {
                font-size: 24px;
            }

            .score-display .value.points {
                font-size: 20px;
            }

            .controls {
                gap: 8px;
            }

            .btn-plus {
                width: 45px;
                height: 45px;
                font-size: 24px;
            }

            .btn-minus {
                width: 35px;
                height: 35px;
                font-size: 20px;
            }

            .top-controls {
                top: 10px;
                right: 10px;
            }

            .reset-btn {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }

            .winner-banner {
                top: 20px;
                padding: 8px 16px;
                font-size: 14px;
            }

            .deuce-indicator {
                bottom: 40px;
                padding: 6px 12px;
                font-size: 12px;
            }
        }

        /* Media Query per schermi molto piccoli (sotto 350px) */
        @media (max-width: 350px), (max-height: 350px) {
            body {
                width: 300px;
                height: 300px;
            }

            .container {
                width: 300px;
                height: 300px;
            }

            .score-grid {
                width: 260px;
                gap: 15px;
            }

            .score-display .value {
                font-size: 28px;
            }

            .score-display .value.games {
                font-size: 20px;
            }

            .score-display .value.points {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function PadelScoreboard() {
            const [score, setScore] = useState({
                team1: { games: 0, sets: 0, points: 0 },
                team2: { games: 0, sets: 0, points: 0 }
            });
            const [matchComplete, setMatchComplete] = useState(false);
            const [winner, setWinner] = useState(null);
            
            const getPointDisplay = (points) => {
                const pointsMap = { 0: '0', 1: '15', 2: '30', 3: '40' };
                return pointsMap[points] || '40';
            };
            
            const checkGameWin = (team1Points, team2Points) => {
                if (team1Points >= 3 && team2Points >= 3) {
                    if (team1Points === team2Points) return null;
                    return team1Points > team2Points ? (team1Points - team2Points >= 2 ? 'team1' : null) : 
                           (team2Points - team1Points >= 2 ? 'team2' : null);
                }
                return team1Points >= 4 ? 'team1' : team2Points >= 4 ? 'team2' : null;
            };
            
            const checkSetWin = (team1Games, team2Games) => {
                if (team1Games >= 6 && team2Games >= 6) {
                    return team1Games >= 7 && team1Games - team2Games >= 1 ? 'team1' :
                           team2Games >= 7 && team2Games - team1Games >= 1 ? 'team2' : null;
                }
                return team1Games >= 6 && team1Games - team2Games >= 2 ? 'team1' :
                       team2Games >= 6 && team2Games - team1Games >= 2 ? 'team2' : null;
            };
            
            const checkMatchWin = (team1Sets, team2Sets) => {
                return team1Sets >= 2 ? 'team1' : team2Sets >= 2 ? 'team2' : null;
            };
            
            const addPoint = (team) => {
                if (matchComplete) return;
                
                const newScore = { ...score };
                newScore[team].points++;
                
                const gameWinner = checkGameWin(newScore.team1.points, newScore.team2.points);
                
                if (gameWinner) {
                    newScore[gameWinner].games++;
                    newScore.team1.points = 0;
                    newScore.team2.points = 0;
                    
                    const setWinner = checkSetWin(newScore.team1.games, newScore.team2.games);
                    
                    if (setWinner) {
                        newScore[setWinner].sets++;
                        newScore.team1.games = 0;
                        newScore.team2.games = 0;
                        
                        const matchWinner = checkMatchWin(newScore.team1.sets, newScore.team2.sets);
                        
                        if (matchWinner) {
                            setMatchComplete(true);
                            setWinner(matchWinner === 'team1' ? 'P1' : 'P2');
                        }
                    }
                }
                
                setScore(newScore);
            };
            
            const removePoint = (team) => {
                if (matchComplete) return;
                
                const newScore = { ...score };
                
                if (newScore[team].points > 0) {
                    newScore[team].points--;
                } else if (newScore[team].games > 0) {
                    newScore[team].games--;
                    newScore.team1.points = 0;
                    newScore.team2.points = 0;
                } else if (newScore[team].sets > 0) {
                    newScore[team].sets--;
                    newScore.team1.games = 0;
                    newScore.team2.games = 0;
                    newScore.team1.points = 0;
                    newScore.team2.points = 0;
                }
                
                setScore(newScore);
                setMatchComplete(false);
                setWinner(null);
            };
            
            const resetMatch = () => {
                setScore({
                    team1: { games: 0, sets: 0, points: 0 },
                    team2: { games: 0, sets: 0, points: 0 }
                });
                setMatchComplete(false);
                setWinner(null);
            };

            return (
                <div className="container">
                    {/* Winner */}
                    {matchComplete && winner && (
                        <div className="winner-banner">
                            🏆 {winner} WINS!
                        </div>
                    )}

                    {/* Reset Button */}
                    <div className="top-controls">
                        <button onClick={resetMatch} className="reset-btn">
                            ↻
                        </button>
                    </div>

                    {/* Main Score Display */}
                    <div className="score-grid">
                        {/* Player 1 */}
                        <div className="player-section">
                            <h2>P1</h2>
                            
                            {/* Sets */}
                            <div className="score-display">
                                <div className="label">SET</div>
                                <div className="value sets p1">
                                    {score.team1.sets}
                                </div>
                            </div>
                            
                            {/* Games */}
                            <div className="score-display">
                                <div className="label">GAME</div>
                                <div className="value games">
                                    {score.team1.games}
                                </div>
                            </div>
                            
                            {/* Points */}
                            <div className="score-display">
                                <div className="label">PUNTI</div>
                                <div className="value points">
                                    {getPointDisplay(score.team1.points)}
                                </div>
                            </div>

                            {/* Controls */}
                            <div className="controls">
                                <button
                                    onClick={() => addPoint('team1')}
                                    disabled={matchComplete}
                                    className="btn-plus p1"
                                    style={{ opacity: matchComplete ? 0.5 : 1 }}
                                >
                                    +
                                </button>
                                <button
                                    onClick={() => removePoint('team1')}
                                    disabled={matchComplete}
                                    className="btn-minus"
                                    style={{ opacity: matchComplete ? 0.5 : 1 }}
                                >
                                    −
                                </button>
                            </div>
                        </div>

                        {/* Player 2 */}
                        <div className="player-section">
                            <h2>P2</h2>
                            
                            {/* Sets */}
                            <div className="score-display">
                                <div className="label">SET</div>
                                <div className="value sets p2">
                                    {score.team2.sets}
                                </div>
                            </div>
                            
                            {/* Games */}
                            <div className="score-display">
                                <div className="label">GAME</div>
                                <div className="value games">
                                    {score.team2.games}
                                </div>
                            </div>
                            
                            {/* Points */}
                            <div className="score-display">
                                <div className="label">PUNTI</div>
                                <div className="value points">
                                    {getPointDisplay(score.team2.points)}
                                </div>
                            </div>

                            {/* Controls */}
                            <div className="controls">
                                <button
                                    onClick={() => addPoint('team2')}
                                    disabled={matchComplete}
                                    className="btn-plus p2"
                                    style={{ opacity: matchComplete ? 0.5 : 1 }}
                                >
                                    +
                                </button>
                                <button
                                    onClick={() => removePoint('team2')}
                                    disabled={matchComplete}
                                    className="btn-minus"
                                    style={{ opacity: matchComplete ? 0.5 : 1 }}
                                >
                                    −
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* Deuce/Advantage Indicator */}
                    {score.team1.points >= 3 && score.team2.points >= 3 && (
                        <div className="deuce-indicator">
                            {score.team1.points === score.team2.points ? 'DEUCE' : 
                             score.team1.points > score.team2.points ? 'ADV P1' : 'ADV P2'}
                        </div>
                    )}
                </div>
            );
        }

        ReactDOM.render(<PadelScoreboard />, document.getElementById('root'));
    </script>
</body>
</html>
